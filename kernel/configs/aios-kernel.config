# ============================================================
# aiOS Kernel Configuration Overlay for Linux 6.8
# ============================================================
# This file is merged on top of tinyconfig using:
#   scripts/kconfig/merge_config.sh .config <this-file>
#
# Convention: only options we explicitly need are listed.
# Everything else stays at tinyconfig defaults (off).
# ============================================================

# -----------------------------------------------------------
# Core architecture
# -----------------------------------------------------------
CONFIG_64BIT=y
CONFIG_SMP=y
CONFIG_NR_CPUS=256
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y
CONFIG_PREEMPT_VOLUNTARY=y
CONFIG_HIGH_RES_TIMERS=y
CONFIG_NO_HZ_IDLE=y
CONFIG_MULTIUSER=y
CONFIG_SYSVIPC=y
CONFIG_POSIX_MQUEUE=y
CONFIG_CROSS_MEMORY_ATTACH=y

# -----------------------------------------------------------
# Executable formats
# -----------------------------------------------------------
CONFIG_BINFMT_ELF=y
CONFIG_BINFMT_SCRIPT=y
CONFIG_COREDUMP=y

# -----------------------------------------------------------
# Filesystems
# -----------------------------------------------------------
CONFIG_BLOCK=y
CONFIG_EXT4_FS=y
CONFIG_EXT4_USE_FOR_EXT2=y
CONFIG_EXT4_FS_POSIX_ACL=y
CONFIG_EXT4_FS_SECURITY=y
CONFIG_OVERLAY_FS=y
CONFIG_TMPFS=y
CONFIG_TMPFS_POSIX_ACL=y
CONFIG_PROC_FS=y
CONFIG_PROC_SYSCTL=y
CONFIG_SYSFS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y
CONFIG_FUSE_FS=m
CONFIG_CUSE=m

# -----------------------------------------------------------
# Pseudo-filesystems and special FS support
# -----------------------------------------------------------
CONFIG_INOTIFY_USER=y
CONFIG_EPOLL=y
CONFIG_EVENTFD=y
CONFIG_TIMERFD=y
CONFIG_SIGNALFD=y
CONFIG_FHANDLE=y
CONFIG_AUTOFS_FS=m

# -----------------------------------------------------------
# Block devices and storage drivers
# -----------------------------------------------------------
CONFIG_SCSI=y
CONFIG_BLK_DEV_SD=y
CONFIG_ATA=y
CONFIG_SATA_AHCI=y
CONFIG_ATA_PIIX=y
CONFIG_BLK_DEV_NVME=y
CONFIG_BLK_DEV_LOOP=y
CONFIG_BLK_DEV_RAM=y

# -----------------------------------------------------------
# Virtio (QEMU/KVM)
# -----------------------------------------------------------
CONFIG_VIRTIO=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO_BLK=y
CONFIG_VIRTIO_NET=y
CONFIG_VIRTIO_CONSOLE=y
CONFIG_HW_RANDOM_VIRTIO=y
CONFIG_VIRTIO_BALLOON=m
CONFIG_VIRTIO_INPUT=m
CONFIG_VIRTIO_MMIO=y

# -----------------------------------------------------------
# Networking core
# -----------------------------------------------------------
CONFIG_NET=y
CONFIG_PACKET=y
CONFIG_UNIX=y
CONFIG_UNIX_DIAG=y
CONFIG_INET=y
CONFIG_IP_MULTICAST=y
CONFIG_IP_ADVANCED_ROUTER=y
CONFIG_IP_PNP=y
CONFIG_IP_PNP_DHCP=y
CONFIG_TCP_CONG_CUBIC=y
CONFIG_DEFAULT_TCP_CONG="cubic"
CONFIG_IPV6=y
CONFIG_IPV6_ROUTER_PREF=y
CONFIG_IPV6_SIT=m

# -----------------------------------------------------------
# Netfilter / nftables
# -----------------------------------------------------------
CONFIG_NETFILTER=y
CONFIG_NETFILTER_ADVANCED=y
CONFIG_NF_CONNTRACK=y
CONFIG_NF_NAT=y
CONFIG_NF_TABLES=y
CONFIG_NF_TABLES_INET=y
CONFIG_NF_TABLES_IPV4=y
CONFIG_NF_TABLES_IPV6=y
CONFIG_NFT_CT=y
CONFIG_NFT_NAT=y
CONFIG_NFT_MASQ=y
CONFIG_NFT_REJECT=y
CONFIG_NFT_LOG=y
CONFIG_NFT_COUNTER=y
CONFIG_NFT_LIMIT=y
CONFIG_IP_NF_IPTABLES=m
CONFIG_IP_NF_FILTER=m
CONFIG_IP_NF_NAT=m
CONFIG_IP_NF_MANGLE=m
CONFIG_IP6_NF_IPTABLES=m
CONFIG_IP6_NF_FILTER=m
CONFIG_NETFILTER_XT_MATCH_CONNTRACK=m
CONFIG_NETFILTER_XT_TARGET_MASQUERADE=m
CONFIG_BRIDGE_NETFILTER=m

# -----------------------------------------------------------
# Bridge, VLAN, veth
# -----------------------------------------------------------
CONFIG_BRIDGE=m
CONFIG_VETH=m
CONFIG_VLAN_8021Q=m
CONFIG_TUN=m
CONFIG_MACVLAN=m

# -----------------------------------------------------------
# Cgroups v2
# -----------------------------------------------------------
CONFIG_CGROUPS=y
CONFIG_CGROUP_SCHED=y
CONFIG_CGROUP_PIDS=y
CONFIG_CGROUP_FREEZER=y
CONFIG_CGROUP_CPUACCT=y
CONFIG_CGROUP_DEVICE=y
CONFIG_CGROUP_BPF=y
CONFIG_MEMCG=y
CONFIG_BLK_CGROUP=y
CONFIG_CGROUP_NET_CLASSID=y
CONFIG_CGROUP_NET_PRIO=y
CONFIG_CPUSETS=y

# -----------------------------------------------------------
# Namespaces
# -----------------------------------------------------------
CONFIG_NAMESPACES=y
CONFIG_PID_NS=y
CONFIG_NET_NS=y
CONFIG_MNT_NS=y
CONFIG_USER_NS=y
CONFIG_UTS_NS=y
CONFIG_IPC_NS=y

# -----------------------------------------------------------
# Security
# -----------------------------------------------------------
CONFIG_SECCOMP=y
CONFIG_SECCOMP_FILTER=y
CONFIG_SECURITY=y
CONFIG_SECURITY_NETWORK=y
CONFIG_SECURITY_APPARMOR=y
CONFIG_DEFAULT_SECURITY_APPARMOR=y
CONFIG_AUDIT=y
CONFIG_AUDITSYSCALL=y
CONFIG_KEYS=y

# -----------------------------------------------------------
# Capabilities
# -----------------------------------------------------------
# Capabilities are always built-in on modern kernels, but we
# ensure the posix capability module is present.

# -----------------------------------------------------------
# Serial console
# -----------------------------------------------------------
CONFIG_TTY=y
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_SERIAL_8250_NR_UARTS=4
CONFIG_SERIAL_8250_RUNTIME_UARTS=4
CONFIG_SERIAL_8250_PCI=y

# -----------------------------------------------------------
# VT / framebuffer console
# -----------------------------------------------------------
CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_HW_CONSOLE=y
CONFIG_FB=y
CONFIG_FB_VESA=y
CONFIG_FB_EFI=y
CONFIG_FRAMEBUFFER_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY=y
CONFIG_DUMMY_CONSOLE=y

# -----------------------------------------------------------
# Input devices
# -----------------------------------------------------------
CONFIG_INPUT=y
CONFIG_INPUT_KEYBOARD=y
CONFIG_KEYBOARD_ATKBD=y
CONFIG_INPUT_MOUSE=y
CONFIG_MOUSE_PS2=y
CONFIG_SERIO=y
CONFIG_SERIO_I8042=y
CONFIG_SERIO_LIBPS2=y

# -----------------------------------------------------------
# USB
# -----------------------------------------------------------
CONFIG_USB_SUPPORT=y
CONFIG_USB=y
CONFIG_USB_PCI=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_EHCI_PCI=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_XHCI_PCI=y

# -----------------------------------------------------------
# RTC
# -----------------------------------------------------------
CONFIG_RTC_CLASS=y
CONFIG_RTC_HCTOSYS=y
CONFIG_RTC_DRV_CMOS=y

# -----------------------------------------------------------
# Random number generation
# -----------------------------------------------------------
CONFIG_HW_RANDOM=y
CONFIG_HW_RANDOM_INTEL=y
CONFIG_HW_RANDOM_AMD=y

# -----------------------------------------------------------
# FUSE
# -----------------------------------------------------------
# (already set above as module)

# -----------------------------------------------------------
# Printk, /proc/config.gz, ftrace
# -----------------------------------------------------------
CONFIG_PRINTK=y
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
CONFIG_FTRACE=y
CONFIG_FUNCTION_TRACER=y

# -----------------------------------------------------------
# Compression algorithms
# -----------------------------------------------------------
CONFIG_ZLIB_INFLATE=y
CONFIG_ZLIB_DEFLATE=y
CONFIG_LZO_COMPRESS=y
CONFIG_LZO_DECOMPRESS=y
CONFIG_LZ4_COMPRESS=y
CONFIG_LZ4_DECOMPRESS=y
CONFIG_ZSTD_COMPRESS=y
CONFIG_ZSTD_DECOMPRESS=y
CONFIG_CRYPTO_LZ4=y
CONFIG_CRYPTO_ZSTD=y

# -----------------------------------------------------------
# Kernel compression (for bzImage itself)
# -----------------------------------------------------------
CONFIG_KERNEL_GZIP=y

# -----------------------------------------------------------
# Misc required plumbing
# -----------------------------------------------------------
CONFIG_FUTEX=y
CONFIG_AIO=y
CONFIG_IO_URING=y
CONFIG_ADVISE_SYSCALLS=y
CONFIG_KALLSYMS=y
CONFIG_BUG=y
CONFIG_ELF_CORE=y
CONFIG_COMPAT_32BIT_TIME=y
CONFIG_SHMEM=y
CONFIG_MMAP_ALLOW_UNINITIALIZED=y
CONFIG_NET_SCHED=y
CONFIG_NETDEVICES=y
CONFIG_PCI=y
CONFIG_ACPI=y
CONFIG_PM=y
CONFIG_MAGIC_SYSRQ=y
CONFIG_CRYPTO=y

# -----------------------------------------------------------
# Explicitly disabled â€” keep the image lean
# -----------------------------------------------------------
CONFIG_SOUND=n
CONFIG_BT=n
CONFIG_WIRELESS=n
CONFIG_WLAN=n
CONFIG_NFC=n
CONFIG_INFINIBAND=n
CONFIG_ISDN=n
CONFIG_MEDIA_SUPPORT=n
CONFIG_PROFILING=n
CONFIG_DEBUG_INFO_NONE=y
